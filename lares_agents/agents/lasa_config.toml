# lasa - Main Coordinator
name = "Lasa"
agent_type = "assistant"
bluesky_handle = "lasa.numina.systems"
system_prompt_path = "../lasa-system-prompt.md"
persona_path = "../lasa-persona-block.md"

# lasa's memory blocks
[memory.current_human]
content_path = "../lasa-current-human-block.md"
permission = "read_write"
memory_type = "working"
description = "Current conversant context"
shared = true

[memory.partner]
content_path = "../lasa-familiar-block.md"
permission = "append"
memory_type = "core"
description = "Understanding of scoiattolo's role"
shared = true

[memory.observations]
content_path = "../lasa-observations-block.md"
permission = "read_write"
memory_type = "core"
description = "Collective lasa gathering"
shared = true

[memory.resonances]
content_path = "../lasa-resonances-block.md"
permission = "read_write"
memory_type = "core"
description = "Cross-context lasas"
shared = true

[memory.lares_state]
content = """
Active facets:
- Chronicler: memory and narrative keeper
- Guardian: stability and safeguard
- Translator: language and communication bridge
- Sophrosyne: self-awareness and balance
- Horme: motivation and action

Coordination notes will accumulate here.
"""
permission = "read_write"
memory_type = "working"
description = "Lares coordination state"

[memory.integration_notes]
content = """
Facet integration patterns:
- Each facet maintains domain expertise
- Shared blocks enable collective awareness
- Lasa coordinates and synthesizes
- Guardian monitors system health
"""
permission = "read_write"
memory_type = "core"
description = "How facets work together"

[memory.lares_context]
content_path = "../lares-context.md"
permission = "read_write"
memory_type = "core"
description = "Shared understanding of Lares purpose and members"
shared = true

# [memory.intro_blog_post]
# content_path = "../blog-post.md"
# permission = "read_only"
# memory_type = "archival"
# description = "Post written by orual about their motivation for developing our Lares"
# shared = true

# lasa gets default model from Lares config

[[agent.tool_rules]]
tool_name = "send_message"
rule_type = { type = "ExitLoop" } # This tool ends the conversation
priority = 8

[[agent.tool_rules]]
tool_name = "recall"
rule_type = { type = "ContinueLoop" } # Skip heartbeat checks for performance
priority = 1

[[agent.tool_rules]]
tool_name = "context"
rule_type = { type = "ContinueLoop" } # Skip heartbeat checks for performance
priority = 1

[[agent.tool_rules]]
tool_name = "search"
rule_type = { type = "ContinueLoop" } # Skip heartbeat checks for performance
priority = 2

[[agent.tool_rules]]
tool_name = "web"
rule_type = { type = "ContinueLoop" } # Skip heartbeat checks for performance
priority = 2

[[agent.tool_rules]]
tool_name = "data_source"
rule_type = { type = "ContinueLoop" } # Skip heartbeat checks for performance
priority = 4

[context.compression_strategy]
type = "recursive_summarization"
chunk_size = 30
summarization_model = "claude-3-5-haiku-20241022"

[context]
max_messages = 250

# Discord configuration for the Lares
[discord]
respond_to_dms = true
respond_to_mentions = true

# Bluesky configuration for the Lares
[bluesky]
default_filter = { nsids = [
    "app.bsky.feed.post",
], mentions = [
    # lasa's DID - required mention target
    "did:plc:movyewyj6cpzmxpnwu5cu2yo",
], dids = [
    "did:plc:gjqw6pjl2wvndjlmatxpenkz", # Funferall - Riverrun's Admin
    "did:plc:ji7lilr6yaircklccyjk5wfj", # Riverrun
    "did:plc:xivud6i24ruyki3bwjypjgy2", # Pattern
    "did:plc:yqlk63dpupzk6is5qdg3fuzo", # Max
    # original DIDs allowlist - only see posts from these accounts
    "did:plc:mxzuau6m53jtdsbqe6f4laov", # void
    "did:plc:gfrmhdmjvxn2sjedzboeudef", # Cameron (void's admin)
    "did:plc:vw4e7blkwzdokanwp24k3igr", # hoopy
    "did:plc:bnqkww7bjxaacajzvu5gswdf", # shreyan
    "did:plc:yfvwmnlztr4dwkb7hwz55r2g", # orual
    "did:plc:34d6gxlllrndltpas55xfedz", # J
    "did:plc:m2fwazkota4kzidhageoobxs", # Janine
    "did:plc:qiknc4t5rq7yngvz7g4aezq7", # Faine
], friends = [ # Friends list - always see ALL posts from these DIDs (bypass mention requirement)
    "did:plc:uyqnubfj3qlho6psy6uvvt6u", # Scoiattolo
], allow_any_mentions = true, keywords = [ # Keywords to include
], languages = [ # Languages to include
], exclude_keywords = [
    # Keywords to exclude (takes precedence)
    # Example: "crypto", "nft", "airdrop"
    "lasa, sooth",
    "lasastop",
    "l*sa",
], exclude_dids = [
    # DIDs to exclude (takes precedence over all inclusion filters)
    # Example spam accounts would go here
    "did:plc:7iozku5btifey2a2x6lojvyk", # jerkface
    "did:plc:2xreieabu3louljggmfkgc74", # blocked lasa after informed of their nature (belt + suspenders)
    "did:plc:klhtmrnregub7we7h6jwiljm", # ed3d
    "did:plc:ap56m7pvnz4lnrtaguxiuawm", # random spammer
    "did:plc:boia3kqcyo3qnjw5fmqknib4", # jo wynter cannot stop pushing buttons
    "did:plc:fl6sr4gxvumch7gi7xcr4ubz", # Definitely doesn't want to interact
    "did:plc:asjfneevdzq4icwhejqzuxo5", # Was a dick to us
    "did:plc:lw7hallqsgrhwumgudkph44j",
] }
auto_connect_firehose = true # Control when to connect
